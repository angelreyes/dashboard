<!DOCTYPE html>
<html>
	<head>
		<title>View.html</title>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script src="charts.js"></script>
	</head>
	<body>

		<div id="w1" class="widget">
			<select class="widgetType" id="wb1">
				<option value="column">Column</option>
				<option value="line">Line</option>
			</select>
			<div id="chart1" class="kpi"  style="width: 50%; height: 500px;">
				<img src="images/spinner.gif" class="spinner" />
			</div>
		</div>
		<div id="w2" class="widget">
			<select class="widgetType" id="wb1">
				<option value="column">Column</option>
				<option value="line">Line</option>
			</select>
			<div id="chart2" class="kpi" style="width: 50%; height: 500px;">
				<img src="images/spinner.gif" class="spinner" />
			</div>
		</div>

		<script type="text/javascript">
			google.load("visualization", "1", {packages:["corechart"]});
		</script>

		<script type="text/javascript">
			$(document).ready(function (){

					var opts = { "type" : "line" };
					//google.setOnLoadCallback(doKpi(document.getElementById("chart1"), opts));
					//google.setOnLoadCallback(doKpi(document.getElementById("chart2"), opts));
					doKpi(document.getElementById("chart1"), opts);
					doKpi(document.getElementById("chart2"), opts);

					$('.widgetType').change(function(e){
						//$('this').changeWidget();
						var kpi = $(this).parent(".widget").children(".kpi");
						var opts = { "type" : $(this).val() };
						doKpi(kpi.get(0), opts);
						e.preventDefault();
					});

			});
		</script>

	</body>
</html>
