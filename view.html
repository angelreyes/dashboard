<!DOCTYPE html>
<html>
	<head>
		<title>View.html</title>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script src="charts.js"></script>
	</head>
	<body>

		<div id="toolbar">
			<table width="100%">
				<tr>
					<td align="left">
						<select id="months">
							<option value="last12">Last 12 Months</option>
							<option value="last6">Last 6 Months</option>
							<option value="last3">Last 3 Months</option>
							<option value="previousYear">Previous Year</option>
						</select>
					</td>
					<td>
					</td>
					<td align="right">
						<button id="refresh">Refresh</button>
					</td>
				</tr>
			</table>
		</div>
		<div id="widgets">
			<div id="w1" class="widget">
				<div id="control1" ></div>
				<select class="widgetType" id="wb1">
					<option value="column">Column</option>
					<option value="line">Line</option>
				</select>
				<div id="dashboard1">
					<div id="chart1" class="kpi"  style="width: 50%; height: 500px;">
						<img src="images/spinner.gif" class="spinner" />
					</div>
				</div>
			</div>
			<div id="w2" class="widget">
				<select class="widgetType" id="wb1">
					<option value="column">Column</option>
					<option value="line">Line</option>
				</select>
				<div id="dashboard2">
					<div id="chart2" class="kpi" style="width: 50%; height: 500px;">
						<img src="images/spinner.gif" class="spinner" />
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript">
			google.load("visualization", "1", {packages:["corechart","controls"]});
		</script>

		<script type="text/javascript">
			$(document).ready(function (){

					var options = { 
						"type" : "line", 
						"filter" : getMonths("last12"), 
					};
					// create each HTML widget
					// create each chart
					doOpts(document.getElementById("chart1"), "type", options.type);
					doOpts(document.getElementById("chart1"), "filter", options.filter);
					doChart(document.getElementById("chart1"), options);
//					doChart(document.getElementById("chart2"), doOpts);
					// end	

					// change time frame
					$('#months').change(function(e){
						doOpts( document.getElementById("chart1"), "filter", getMonths( $(this).val()) );
						doChart(document.getElementById("chart1"), doOpts(document.getElementById("chart1")));
						e.preventDefault();
					});
					

					// change chart type
					$('.widgetType').change(function(e){
						//$('this').changeWidget();
						var kpi = $(this).parent(".widget").find(".kpi").get(0);
						doOpts(kpi, "type", $(this).val() );
						doChart(kpi, doOpts(kpi));
						e.preventDefault();
					});

			});
		</script>

	</body>
</html>
